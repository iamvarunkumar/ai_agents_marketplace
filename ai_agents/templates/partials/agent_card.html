{# templates/partials/agent_card.html #}
{% load static %}

{# This template expects variables: tool_name, tool_desc, tool_url_name, img_name #}

<div class="glass-panel h-100 p-3 d-flex flex-column agent-card">
    {# Illustration Placeholder #}
    <div class="agent-card-illustration mb-3 text-center">
        <img src="{% static 'images/'|add:img_name %}"
             onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'illustration-placeholder-small\'></div>';" {# Basic fallback #}
             alt="{{ tool_name }} Illustration"
             class="img-fluid rounded"
             style="max-height: 80px; height: 80px; width: auto; margin: auto; opacity: 0.7;">
    </div>

    {# Card Content #}
    <h3 class="h6 fw-bold mb-2 text-center">{{ tool_name }}</h3> {# Use h6 for card title #}
    <p class="small text-muted-color flex-grow-1 mb-3 text-center">
        {{ tool_desc|truncatechars:80 }}
    </p>

    {# --- DEBUGGING: Print the value of tool_url_name --- #}
    <p style="color: yellow; font-size: 0.7rem; text-align: center; word-break: break-all;">DEBUG: tool_url_name = '{{ tool_url_name }}'</p>
    {# --- END DEBUGGING --- #}


    {# Link to the tool page #}
    <a href="{% if tool_url_name and tool_url_name != '#' %}{% url tool_url_name %}{% else %}#{% endif %}"
       class="btn btn-sm btn-outline-primary mt-auto stretched-link {% if not tool_url_name or tool_url_name == '#' %}disabled{% endif %}"> {# Disable button if URL is missing or '#' #}
        Use Tool
    </a>
</div>

{# Add basic style for fallback placeholder if needed in base.html or here #}
<style>
.agent-card-illustration {
    height: 90px; /* Fixed height for consistency */
    display: flex;
    align-items: center;
    justify-content: center;
}
.illustration-placeholder-small {
    width: 60px;
    height: 60px;
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px dashed var(--glass-border);
    border-radius: var(--border-radius);
    margin: auto;
}
</style>