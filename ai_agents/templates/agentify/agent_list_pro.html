{# templates/agentify/agent_list_pro.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Pro AI Agents & Tools{% endblock title %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-11 col-xl-10"> {# Consistent width #}
            <div class="glass-panel mt-4 mb-4 p-4 p-md-5">
                <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
                    <div>
                        <h1 class="display-6 fw-bold mb-1">Pro AI Agents & Tools</h1>
                        <p class="text-muted-color mb-0">
                            Explore powerful Pro-tier agents.
                        </p>
                    </div>
                    {# Optional: Link back to other tiers #}
                    <div class="btn-group tier-toggle mt-3 mt-md-0" role="group" aria-label="Tier Toggle">
                        <a href="{% url 'agentify:agent_list_basic' %}" class="btn btn-sm btn-outline-secondary">Basic</a>
                        <a href="{% url 'agentify:agent_list_pro' %}" class="btn btn-sm btn-primary">Pro</a> {# Active state #}
                        <a href="{% url 'agentify:agent_list_advanced' %}" class="btn btn-sm btn-outline-secondary">Advanced</a>
                    </div>
                </div>

                {# Loop through categorized agents passed from the ProAgentListView context #}
                {% if categorized_agents %}
                    {% for category_name, agents_in_category in categorized_agents.items %}
                        <div class="category-section mb-5">
                            <h2 class="h4 fw-bold mb-3 category-title">{{ category_name }}</h2>
                            <div class="row g-4">
                                {% for agent in agents_in_category %}
                                    <div class="col-sm-6 col-md-6 col-lg-4">
                                        {% include "partials/agent_card.html" with agent=agent %}
                                    </div>
                                {% empty %}
                                     <p class="text-muted-color">No Pro agents found in this category.</p>
                                {% endfor %}
                            </div>
                        </div>
                        <hr class="border-secondary my-4 d-lg-none">
                    {% endfor %}

                    {# Pagination Controls #}
                    {% if is_paginated %}
                        <nav aria-label="Agent pagination" class="mt-5 d-flex justify-content-center">
                            <ul class="pagination pagination-sm">
                                {% if page_obj.has_previous %} <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
                                {% else %} <li class="page-item disabled"><span class="page-link" aria-hidden="true">&laquo;</span></li> {% endif %}
                                {% for i in paginator.page_range %}
                                  {% if page_obj.number == i %} <li class="page-item active" aria-current="page"><span class="page-link">{{ i }}</span></li>
                                  {% elif i > page_obj.number|add:'-3' and i < page_obj.number|add:'3' %} <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                                  {% elif i == paginator.page_range.0 or i == paginator.page_range|last %}
                                     {% if i == paginator.page_range.0 and page_obj.number > 4 %} <li class="page-item disabled"><span class="page-link">&hellip;</span></li>
                                     {% elif i == paginator.page_range|last and page_obj.number < paginator.num_pages|add:"-3" %} <li class="page-item disabled"><span class="page-link">&hellip;</span></li> {% endif %}
                                     <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                                  {% endif %}
                                {% endfor %}
                                {% if page_obj.has_next %} <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
                                {% else %} <li class="page-item disabled"><span class="page-link" aria-hidden="true">&raquo;</span></li> {% endif %}
                            </ul>
                        </nav>
                    {% endif %}
                {% else %}
                    <p class="text-center text-muted-color mt-5">No Pro agents found in the marketplace.</p>
                    <p class="text-center text-muted-color small">(Ensure agents exist, are public, and assigned the 'Pro' tier in admin.)</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}
{% block extra_head %}<style>.category-title { color: var(--primary-color); border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem; margin-bottom: 1.5rem !important; } .tier-toggle .btn { min-width: 80px; } .pagination .page-link { background-color: rgba(255, 255, 255, 0.05); border-color: var(--glass-border); color: var(--text-muted-color); } .pagination .page-link:hover { background-color: rgba(255, 255, 255, 0.1); color: var(--text-color); } .pagination .page-item.active .page-link { background-color: var(--primary-color); border-color: var(--primary-color); color: #fff; } .pagination .page-item.disabled .page-link { background-color: transparent; border-color: var(--glass-border); color: rgba(255, 255, 255, 0.3); }</style>{% endblock extra_head %}

